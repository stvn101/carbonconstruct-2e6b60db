
/* Improve touch targets on mobile */
@media (max-width: 640px) {
  button, 
  a.button,
  .clickable {
    min-height: 44px; /* Updated to meet WCAG guidelines */
    min-width: 44px;
    padding: 0.5rem 1rem;
  }
  
  input, select, textarea {
    padding: 0.75rem;
    font-size: 16px; /* Prevent iOS zoom */
  }

  /* Consistent form field spacing on mobile */
  .form-field {
    @apply mb-4;
  }
  
  /* Better dropdown positioning for mobile */
  [data-radix-popper-content-wrapper] {
    max-width: calc(100vw - 24px) !important;
    z-index: 999 !important;
  }
  
  /* Fix mobile scrolling with fixed elements */
  html, body {
    max-width: 100vw;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Improve text readability on mobile */
  .text-sm {
    font-size: 0.9375rem;
    line-height: 1.5rem;
  }

  /* Ensure chart tooltips don't get cut off on mobile screens */
  .recharts-tooltip-wrapper {
    max-width: 80vw !important;
  }

  .recharts-default-tooltip {
    max-width: 100% !important;
    overflow-wrap: break-word !important;
    white-space: normal !important;
    font-size: 12px !important;
  }

  /* Fix navbar on mobile */
  .navbar-container {
    @apply px-4;
  }
  
  /* Material table improvements for mobile */
  .materials-table th,
  .materials-table td {
    @apply px-2 py-3 text-sm;
  }
  
  /* Material cards for very small screens */
  .material-card {
    @apply p-3;
  }
  
  .material-card-title {
    @apply text-base;
  }
  
  /* Fix database header on small screens */
  .database-header-title {
    @apply text-2xl;
  }
  
  /* Fix filter layout on mobile */
  .filter-container {
    @apply flex-col;
  }
  
  .filter-item {
    @apply w-full mb-2;
  }
  
  /* Custom styles for Grok AI components */
  .grok-chat-container {
    max-height: calc(100vh - 240px);
    height: calc(100vh - 240px);
  }
  
  .grok-input {
    padding-top: 10px;
    padding-bottom: 10px;
    font-size: 16px; /* Prevent iOS zoom */
  }
  
  .grok-message {
    max-width: 90%;
    font-size: 0.9rem;
    padding: 0.5rem 0.75rem;
  }
  
  .grok-compliance-card {
    padding: 0.75rem;
  }
  
  .grok-compliance-title {
    font-size: 1rem;
  }
  
  .grok-badge {
    font-size: 0.7rem;
  }
}

/* Ensure tooltips stay within viewport on all screen sizes */
.recharts-tooltip-wrapper {
  pointer-events: none;
  z-index: 1000 !important;
}

/* Fix for chart tooltips that may get cut off at viewport edges */
[data-radix-popper-content-wrapper],
.recharts-tooltip-wrapper {
  overflow: visible !important;
  pointer-events: none;
}

.recharts-tooltip-container {
  max-width: calc(100vw - 40px);
}

/* Fix mobile menu layering */
.mobile-menu {
  z-index: 50;
}

/* Improve mobile form inputs */
@media (max-width: 640px) {
  input[type="text"],
  input[type="number"],
  input[type="email"],
  input[type="password"],
  select,
  textarea {
    @apply w-full text-base;
    -webkit-appearance: none;
    border-radius: 6px;
  }

  /* Fix for iOS input shadows */
  input,
  textarea {
    -webkit-appearance: none;
    appearance: none;
  }
  
  /* Material database specific mobile optimizations */
  .database-filter-card {
    @apply p-3;
  }
  
  .database-filter-title {
    @apply text-base;
  }
  
  .database-results-table {
    @apply overflow-x-auto -mx-4 px-4;
    width: calc(100% + 2rem);
  }
  
  .database-stats {
    @apply grid-cols-2 gap-2;
  }
  
  .database-stats-item {
    @apply p-2;
  }
  
  .database-stats-value {
    @apply text-lg;
  }
}

/* Responsive table adjustments */
@media (max-width: 640px) {
  .table-responsive {
    display: block;
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Material table row tweaks */
  .material-name {
    @apply font-medium mb-1;
  }
  
  .material-meta {
    @apply text-xs text-muted-foreground;
  }
  
  .material-carbon {
    @apply text-sm font-medium;
  }
  
  .material-alternative {
    @apply text-xs text-green-600 dark:text-green-400;
  }
}

/* Fix sticky header on mobile */
@supports (-webkit-touch-callout: none) {
  .sticky-header {
    position: -webkit-sticky;
    top: 0;
    z-index: 40;
  }
  
  /* Safe area insets for modern iOS */
  .safe-inset-padding {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  
  /* Fix bottom navigation bar spacing */
  .bottom-nav-safe {
    padding-bottom: calc(env(safe-area-inset-bottom) + 1rem);
  }
}

/* Modals and dialogs on mobile */
@media (max-width: 640px) {
  .dialog-content {
    @apply p-4 w-[95vw] max-h-[90vh];
  }
  
  .dialog-title {
    @apply text-lg;
  }
  
  .dialog-description {
    @apply text-sm;
  }
  
  /* Ensure buttons have sufficient touch targets */
  .dialog-actions button {
    @apply py-2 px-3;
  }
  
  /* Grok AI specific adjustments */
  .grok-chat-message {
    @apply text-sm;
  }
  
  .grok-analyze-button {
    @apply w-full justify-center;
  }
  
  .grok-analysis-section {
    @apply p-2;
  }
}

/* Material database specific media queries */
@media (max-width: 768px) {
  .material-filter-tabs {
    @apply overflow-x-auto flex-nowrap;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
  }
  
  .material-filter-tabs::-webkit-scrollbar {
    display: none; /* Chrome/Safari/Opera */
  }
  
  .material-tags-list {
    @apply flex-wrap;
  }
  
  .material-stats-grid {
    @apply grid-cols-2;
  }
}
