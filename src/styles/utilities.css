/* This file contains utility classes that don't fit in other categories */

/* Form field consistency */
.form-field {
  @apply w-full mb-4;
}

.form-label {
  @apply block font-medium text-sm mb-1.5 text-carbon-800 dark:text-carbon-200;
}

.form-input {
  @apply h-10 w-full rounded-md border border-input px-3 py-2 text-sm;
}

.form-error {
  @apply text-red-500 text-xs mt-1 min-h-[1.25rem];
}

/* Input validation states */
.input-valid {
  @apply border-green-500 bg-green-50/50 focus:ring-green-500/20 focus:border-green-500;
}

.input-invalid {
  @apply border-destructive bg-destructive/5 focus:ring-destructive/20 focus:border-destructive;
}

.input-warning {
  @apply border-orange-500 bg-orange-50/50 focus:ring-orange-500/20 focus:border-orange-500;
}

.validation-message {
  @apply flex items-center gap-1.5 text-xs mt-1;
}

.validation-message.error {
  @apply text-destructive;
}

.validation-message.warning {
  @apply text-orange-600;
}

.validation-message.success {
  @apply text-green-600;
}

/* Content spacing with fixed navbar */
.navbar-spacer {
  height: var(--navbar-height, 64px);
}

.content-top-spacing {
  padding-top: calc(var(--navbar-height, 64px) + 1.5rem);
}

/* Helper tip styling */
.helper-tip {
  @apply bg-carbon-50 border-l-4 border-carbon-500 p-4 mb-4 rounded-sm shadow-sm;
}

.helper-tip-title {
  @apply font-bold text-carbon-700 text-lg mb-2;
}

.helper-tip-content {
  @apply text-carbon-600;
}

/* Tutorial steps */
.tutorial-step {
  @apply flex items-start gap-3 mb-6;
}

.tutorial-step-number {
  @apply w-8 h-8 rounded-full bg-carbon-600 text-white flex items-center justify-center font-bold flex-shrink-0;
}

.tutorial-step-content {
  @apply flex-1;
}

.tutorial-step-title {
  @apply font-bold mb-1 text-lg;
}

.tutorial-step-description {
  @apply text-muted-foreground;
}

/* Dark mode variants */
.dark .helper-tip {
  @apply bg-carbon-900 border-carbon-400 text-carbon-100;
}

.dark .helper-tip-title {
  @apply text-carbon-200;
}

.dark .helper-tip-content {
  @apply text-carbon-300;
}

.dark .tutorial-step-number {
  @apply bg-carbon-500 text-carbon-50;
}

/* Accessible tab navigation focus indicators */
:focus-visible {
  @apply outline-2 outline-carbon-500 outline-offset-2;
}

/* Fix for button interaction issues */
button, a {
  @apply select-none touch-manipulation;
}

/* Fix for inputs in calculator */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

/* Fix for overflow issues on mobile */
.mobile-friendly-container {
  max-width: 100%;
  overflow-x: hidden;
}

/* Improve touch targets on mobile */
@media (max-width: 640px) {
  button, 
  a.button,
  .clickable {
    min-height: 40px;
    min-width: 40px;
  }
  
  input, select, textarea {
    padding: 0.5rem;
  }

  /* Consistent form field spacing on mobile */
  .form-field {
    @apply mb-3;
  }
  
  /* Better dropdown positioning for mobile */
  [data-radix-popper-content-wrapper] {
    z-index: 999 !important;
  }
  
  /* Fix mobile scrolling with fixed elements */
  html, body {
    max-width: 100vw;
    overflow-x: hidden;
  }
  
  /* Improve text readability on mobile */
  .text-sm {
    font-size: 0.875rem;
    line-height: 1.5rem;
  }
}

/* Feature access control - hide premium features */
.premium-feature {
  @apply hidden;
}

.premium-user .premium-feature {
  @apply block;
}

/* Conditional navbar items */
.navbar-item-free {
  @apply block;
}

.navbar-item-premium {
  @apply hidden;
}

.premium-user .navbar-item-free {
  @apply hidden;
}

.premium-user .navbar-item-premium {
  @apply block;
}

/* Z-index hierarchy for overlapping elements */
.z-popup {
  z-index: 100;
}

.z-dropdown {
  z-index: 50;
}

.z-navbar {
  z-index: 40;
}

.z-theme-toggle {
  z-index: 30;
}

/* Safe area insets for modern mobile browsers */
@supports (padding-top: env(safe-area-inset-top)) {
  .safe-area-inset {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}
